===================
Delivery DHL Parcel
===================

.. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--spain-lightgray.png?logo=github
    :target: https://github.com/OCA/l10n-spain/tree/14.0/delivery_dhl_parcel
    :alt: OCA/l10n-spain
.. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
    :target: https://translation.odoo-community.org/projects/l10n-spain-14-0/l10n-spain-14-0-delivery_dhl_parcel
    :alt: Translate me on Weblate
.. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
    :target: https://runbot.odoo-community.org/runbot/189/14.0
    :alt: Try me on Runbot

|badge1| |badge2| |badge3| |badge4| |badge5| 

Este módulo integra la API de DHL Parcel con Odoo. No es
válido para otras integraciones de DHL como el Express, que usan otras APIs.

IMPORTANTE:
Hay varias APIs distintas para DHL España y DHL Parcel, esta API solo funciona para
una de ellas. Para notificar y pedir las credenciales correctas a tu comercial
de integración, se puede pasar el documento que hay en /doc para indicar
exactamente cuál es la API que se quiere usar.
El formato de las credenciales que se usan en esta es el siguiente:

Usuario: 11000000EMPRESA
Pass: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

Puede que acepte algún otro, pero no puedo verificarlo.

**Table of contents**

.. contents::
   :local:

Installation
============

Depende de los módulos de OCA/delivery-carrier `delivery_package_number` y `delivery_state`.

La API de DHL Parcel no provee métodos de cálculo de precio, de modo que para poder
calcular los costes de envío sería recomendable instalar el módulo
`delivery_price_method`.

Configuration
=============

Para configurar el transportista:

#. Vaya a *Inventario > Configuración > Entrega > Método de envío* y cree uno
   nuevo.
#. Escoja *DHL Parcel* Como proveedor.
#. Configure los datos de servicio que tiene contratados y el producto de
   envío que desea utilizar.

El código de cliente es el UID con un guión y sin letras al final
i.e. UID = 08100000AB, tu Código de cliente sería 08-100000

Usage
=====

Estas son las distintas operaciones posibles con este módulo:

Grabar servicios
~~~~~~~~~~~~~~~~

  #. Al confirmar el albarán, el servicio se grabará en DHL Parcel.
  #. Con la respuesta, se registrará en el chatter la referencia de envío y
     las etiquetas correspondientes.
  #. Para gestionar los bultos del envío, se puede utilizar el campo de número
     de bultos que añade `delivery_package_number` (ver el README para mayor
     información) o bien el flujo nativo de Odoo con paquetes de envío. El
     módulo mandará a la API de DHL Parcel el número correspondiente y podremos
     descargar las etiquetas en PDF con su correspondiente numeración.

Cancelar servicios
~~~~~~~~~~~~~~~~~~

  #. Al igual que en otros métodos de envío, en los albaranes de salida podemos
     cancelar un servicio determinado mediante la acción correspondiente en la
     pestaña de *Información Adicional*, sección *Información de entrega* una
     vez el pedido esté confirmado y la expedición generada.
  #. Podremos generar una nueva expedición una vez cancelado si fuese necesario.

Obtener etiquetas
~~~~~~~~~~~~~~~~~

  #. Si por error hubiésemos eliminado el adjunto de las etiquetas que obtuvimos
     en la grabación del servicio, podemos obtenerlas de nuevo pulsando en el
     botón "Etiqueta DHL Parcel" que tenemos en la parte superior de la vista
     formulario del albarán.

Seguimiento de envíos
~~~~~~~~~~~~~~~~~~~~~

  #. El módulo está integrado con `delivery_state` para poder recabar la
     información de seguimiento de nuestros envíos directamente desde la API de
     DHL Parcel.
  #. Para ello, vaya al albarán con un envío DHL Parcel ya grabado y en la pestaña de
     *Información adicional* verá el botón *Actualizar seguimiento* para pedir
     a la API que actualice el estado de este envío en Odoo.

Cierre del día
~~~~~~~~~~~~~~

  #. Desde un smart button en el formulario del transportista, se puede
     cerrar el día manualmente.

Depuración de errores
~~~~~~~~~~~~~~~~~~~~~

  #. Es importante tener en cuenta que solo funcionará con códigos postales de
     España (por lo menos para el consignatario).
  #. También puede activar Odoo con `--log-level=debug` para registrar las
     peticiones y las respuestas en el log.

Known issues / Roadmap
======================

* La API no facilita métodos para cotizar el coste real de los envíos, por lo
  que siempre se cotizan a 0. Si la cotización de envíos es necesaria,
  puede instalarse el módulo OCA `delivery_price_method` o bien personalizar
  el método de cotización para este tipo de transportista.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-spain/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us smashing it by providing a detailed and welcomed
`feedback <https://github.com/OCA/l10n-spain/issues/new?body=module:%20delivery_dhl_parcel%0Aversion:%2014.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
~~~~~~~

* Studio73

Contributors
~~~~~~~~~~~~

* `Studio73 <https://www.studio73.es>`_:

  * Ethan Hildick

Maintainers
~~~~~~~~~~~

This module is maintained by the OCA.

.. image:: https://odoo-community.org/logo.png
   :alt: Odoo Community Association
   :target: https://odoo-community.org

OCA, or the Odoo Community Association, is a nonprofit organization whose
mission is to support the collaborative development of Odoo features and
promote its widespread use.

This module is part of the `OCA/l10n-spain <https://github.com/OCA/l10n-spain/tree/14.0/delivery_dhl_parcel>`_ project on GitHub.

You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
