=======================================
Intrastat Product Declaration for Spain
=======================================

.. 
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:5f702dda1bf779cf86e8624438527abc333ba51bdc0d4b2568da8a2da28475f5
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--spain-lightgray.png?logo=github
    :target: https://github.com/OCA/l10n-spain/tree/16.0/l10n_es_intrastat_report
    :alt: OCA/l10n-spain
.. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
    :target: https://translation.odoo-community.org/projects/l10n-spain-16-0/l10n-spain-16-0-l10n_es_intrastat_report
    :alt: Translate me on Weblate
.. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
    :target: https://runboat.odoo-community.org/builds?repo=OCA/l10n-spain&target_branch=16.0
    :alt: Try me on Runboat

|badge1| |badge2| |badge3| |badge4| |badge5|

This module implements the Spanish Intrastat reporting.

The report can be reviewed and corrected where needed before
the creation of the csv file for the declaration.

**Table of contents**

.. contents::
   :local:

Installation
============

WARNING: This module conflicts with the Intrastat modules from the official
enterprise addons. If you have already installed these modules, you should
uninstall them before installing this module.

You need to add HS product codes for your company through the installation
wizard. It's automatically launched if installing the module from the UI.

If any other installation method is used, you can go to
*Settings > Technical > Actions > Configuration Wizards* on developer mode,
and launch there the wizard called "Import Spanish Product HS Codes"

The included codes are for 2023. Please check possible updates for this codes in:

https://sede.agenciatributaria.gob.es/Sede/estadisticas/estadisticas-comercio-exterior/nomenclatura-combinada-ano.html

This wizard also sets a sane default Intrastat transaction type for each kind
of invoice at company level, but it can be changed later.

Configuration
=============

This module adds the following configuration parameters:

* Company

  - Arrivals : Exempt, Standard or Extended
  - Dispatches : Exempt, Standard or Extended
  - Default Intrastat Transaction
  - Default Intrastat Transport Mode (Extended Declaration)
  - Default Intrastat Incoterm (Extended Declaration)

* Warehouse

  - Intrastat State to cope with warehouses in different states

    The configuration of the Intrastat State on a Warehouse, requires a login
    belonging to the "Spanish Intrastat Product Declaration" security group.

* Intrastat Codes, Supplementary Units, Transaction Types, Transport Modes, States

  Cf. menu *Invoicing / Configuration / Miscellaneous / Intrastat Configuration*

* Product

  You can define a default Intrastat Code on the Product or the Product Category.

Usage
=====

#. Go to *Invocing > Reporting > Intrastat > Spanish Intrastat Product Declaration*.
#. Create a new record.
#. Select or input following data:

   * Year
   * Month
   * Type: for selecting if arrivals or dispatches.
   * Reporting level: standard or extended.
   * Action:

     * if "Nihil", no recomputation is possible and the report is considered empty.
     * if "Replace", everything is recomputed.
     * if "Append", only new lines are added.
#. Click on "Generate Lines from invoices" for populating transaction lines.

   You can review them on "Transactions" page of the report.
#. Click on "Generate Declaration Lines" for populating the lines that summarize
   transactions and will be the source for the exports.

   You can review them on "Declaration Lines" page.
#. Click on "Generate CSV Declaration Line" for getting the CSV for declaring
   the report in AEAT.
#. Click on "Excel Export" for having the information in a spreadsheet.

Known issues / Roadmap
======================

- The current version of the Intrastat reporting module is only based on invoices.
  Since associated stock moves are not taken into consideration, it is possible that manual
  corrections are required, e.g.

  - Product movements without invoices are not included in the current version
    of this module and must be added manually to the report lines
    before generating the declaration.

- The current version of the Intrastat reporting module does not perform a
  cross-check with the VAT declaration.
- Add tests.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-spain/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/OCA/l10n-spain/issues/new?body=module:%20l10n_es_intrastat_report%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
~~~~~~~

* FactorLibre
* Noviat
* Tecnativa

Contributors
~~~~~~~~~~~~

* Ismael Calvo, FactorLibre <ismael.calvo@factorlibre.com>
* Luc De Meyer, Noviat <info@noviat.com>
* Daniel Duque <daniel.duque@factorlibre.com>
* `Tecnativa <https://www.tecnativa.com>`__:

  * Manuel Calero
  * Pedro M. Baeza
  * João Marques
  * Víctor Martínez

* `Sygel <https://www.sygel.es>`__:

  * Harald Panten
  * Valentin Vinagre

* `GreenIce <https://www.greenice.com>`__:

  * Fernando La Chica

Maintainers
~~~~~~~~~~~

This module is maintained by the OCA.

.. image:: https://odoo-community.org/logo.png
   :alt: Odoo Community Association
   :target: https://odoo-community.org

OCA, or the Odoo Community Association, is a nonprofit organization whose
mission is to support the collaborative development of Odoo features and
promote its widespread use.

This module is part of the `OCA/l10n-spain <https://github.com/OCA/l10n-spain/tree/16.0/l10n_es_intrastat_report>`_ project on GitHub.

You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
