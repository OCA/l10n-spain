<?xml version="1.0" encoding="utf-8"?>

<odoo>

    <!-- Tipo de Registro 2 – Registro de facturas recibidas: -->
    <record id="aeat_mod340_invoice_received_export_config" model="aeat.model.export.config">
        <field name="name">Exportación modelo 340 - Tipo de Registro 2 – Registro de facturas recibidas</field>
        <field name="model_number">340</field>
    </record>
          <!-- 1           Tipo de Registro -->
          <record id="aeat_mod340_invoice_received_export_line_01" model="aeat.model.export.config.line">
              <field name="sequence">1</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Constante: 2</field>
              <field name="fixed_value">2</field>
              <field name="export_type">string</field>
              <field name="size">1</field>
              <field name="alignment">left</field>
          </record>
          <!-- 2-4         Modelo Declaración -->
          <record id="aeat_mod340_invoice_received_export_line_02" model="aeat.model.export.config.line">
              <field name="sequence">2</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Constante: 340</field>
              <field name="fixed_value">340</field>
              <field name="export_type">string</field>
              <field name="size">3</field>
              <field name="alignment">left</field>
          </record>
          <!-- 5-8         Ejercicio -->
          <record id="aeat_mod340_invoice_received_export_line_03" model="aeat.model.export.config.line">
              <field name="sequence">3</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Ejercicio</field>
              <field name="expression">${object.mod340_id.year}</field>
              <field name="export_type">string</field>
              <field name="size">4</field>
              <field name="alignment">left</field>
          </record>
          <!-- 9-17        NIF del declarante -->
          <record id="aeat_mod340_invoice_received_export_line_04" model="aeat.model.export.config.line">
              <field name="sequence">4</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">NIF del declarante</field>
              <field name="expression">${object.mod340_id.company_vat}</field>
              <field name="export_type">string</field>
              <field name="size">9</field>
              <field name="alignment">left</field>
          </record>
          <!-- 18-26       NIF del declarado -->
          <record id="aeat_mod340_invoice_received_export_line_05" model="aeat.model.export.config.line">
              <field name="sequence">5</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">NIF del declarando</field>
              <field name="expression">${object.invoice_record_id.partner_vat}</field>
              <field name="export_type">string</field>
              <field name="size">9</field>
              <field name="alignment">left</field>
          </record>
          <!-- 27-35       NIF del representante legal -->
          <record id="aeat_mod340_invoice_received_export_line_06" model="aeat.model.export.config.line">
              <field name="sequence">6</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">NIF del representante legal</field>
              <field name="expression">${object.invoice_record_id.representative_vat}</field>
              <field name="export_type">string</field>
              <field name="size">9</field>
              <field name="alignment">left</field>
          </record>

          <!-- 36-75       Apellidos y nombre, razón social o -->
          <!--             denominación del declarado -->
          <record id="aeat_mod340_invoice_received_export_line_07" model="aeat.model.export.config.line">
              <field name="sequence">7</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Apellidos y nombre o razón social del operador intracomunitario</field>
              <field name="expression">${object.invoice_record_id.partner_id.name}</field>
              <field name="export_type">string</field>
              <field name="size">40</field>
              <field name="alignment">left</field>
          </record>
          <!-- 76-77       Código país -->
          <record id="aeat_mod340_invoice_received_export_line_08" model="aeat.model.export.config.line">
              <field name="sequence">8</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Código país</field>
              <field name="expression">${object.invoice_record_id.partner_country_code}</field>
              <field name="export_type">string</field>
              <field name="size">2</field>
              <field name="alignment">left</field>
          </record>

          <!-- 78          Clave de identificación en el país de residencia -->
          <record id="aeat_mod340_invoice_received_export_line_09" model="aeat.model.export.config.line">
              <field name="sequence">9</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Clave de identificación en el país de residencia</field>
              <field name="expression">${object.invoice_record_id.partner_id.vat_type}</field>
              <field name="export_type">string</field>
              <field name="size">1</field>
              <field name="alignment">left</field>
          </record>

          <!-- 79-95       Número de identificación fiscal en el país de -->
          <!--             residencia. -->
          <record id="aeat_mod340_invoice_received_export_line_10" model="aeat.model.export.config.line">
              <field name="sequence">10</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Número de identificación fiscal en el país de residencia.</field>
              <field name="expression">${object.invoice_record_id.country_vat}</field>
              <field name="export_type">string</field>
              <field name="size">17</field>
              <field name="alignment">left</field>
          </record>

          <!-- 96-98       Blancos -->
          <record id="aeat_mod340_invoice_received_export_line_11" model="aeat.model.export.config.line">
              <field name="sequence">11</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Blancos</field>
              <field name="fixed_value"></field>
              <field name="export_type">string</field>
              <field name="size">3</field>
              <field name="alignment">left</field>
          </record>

          <!-- 99          Clave tipo de libro. Constante 'R'. -->
          <record id="aeat_mod340_invoice_received_export_line_12" model="aeat.model.export.config.line">
              <field name="sequence">12</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Clave tipo de libro. Constante 'R'</field>
              <field name="fixed_value">R</field>
              <field name="export_type">string</field>
              <field name="size">1</field>
              <field name="alignment">left</field>
          </record>

          <!-- 100         Clave de operación. Constante ' ' para un solo tipo de -->
          <!--             IVA. Constante 'C' para varios tipos de IVA. TODO Resto -->
          <!--             de operaciones. Varios tipos impositivos. -->
          <record id="aeat_mod340_invoice_received_export_line_13" model="aeat.model.export.config.line">
              <field name="sequence">13</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Clave de operación</field>
              <field name="expression">${object.invoice_record_id.operation_key}</field>
              <field name="export_type">string</field>
              <field name="size">1</field>
              <field name="alignment">left</field>
          </record>

          <!-- 101-108     Fecha de expedición -->
          <record id="aeat_mod340_invoice_received_export_line_14" model="aeat.model.export.config.line">
              <field name="sequence">14</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Fecha de expedición</field>
              <field name="expression">${object.invoice_record_id.invoice_date}</field>
              <field name="export_type">string</field>
              <field name="size">8</field>
              <field name="alignment">left</field>
          </record>
          <!-- 109-116     Fecha de operación. Se consigna la misma que -->
          <!--             expedición. TODO. Fecha del uso del bien. -->
          <record id="aeat_mod340_invoice_received_export_line_15" model="aeat.model.export.config.line">
              <field name="sequence">15</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Fecha de operación</field>
              <field name="expression">${object.invoice_record_id.invoice_date}</field>
              <field name="export_type">string</field>
              <field name="size">8</field>
              <field name="alignment">left</field>
          </record>
          <!-- 117-121     Tipo impositivo -->
          <record id="aeat_mod340_invoice_received_export_line_16" model="aeat.model.export.config.line">
              <field name="sequence">16</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Tipo impositivo</field>
              <field name="expression">${object.tax_percentage}</field>
              <field name="export_type">float</field>
              <field name="apply_sign" eval="False"/>
              <field name="size">5</field>
              <field name="decimal_size">2</field>
              <field name="alignment">right</field>
          </record>

          <!-- 122-135     Base imponible -->
          <record id="aeat_mod340_invoice_received_export_line_17" model="aeat.model.export.config.line">
              <field name="sequence">17</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Base imponible</field>
              <field name="expression">${object.base_amount}</field>
              <field name="export_type">float</field>
              <field name="apply_sign" eval="False"/>
              <field name="size">14</field>
              <field name="decimal_size">2</field>
              <field name="alignment">right</field>
          </record>

          <!-- 136-149     Cuota del impuesto -->
          <record id="aeat_mod340_invoice_received_export_line_18" model="aeat.model.export.config.line">
              <field name="sequence">18</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Cuota del impuesto</field>
              <field name="expression">${object.tax_amount}</field>
              <field name="export_type">float</field>
              <field name="apply_sign" eval="False"/>
              <field name="size">14</field>
              <field name="decimal_size">2</field>
              <field name="alignment">right</field>
          </record>

          <!-- 150-163     Importe total de la factura -->
          <record id="aeat_mod340_invoice_received_export_line_19" model="aeat.model.export.config.line">
              <field name="sequence">19</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Importe total de la factura</field>
              <field name="expression">${object.tax_amount + object.base_amount}</field>
              <field name="export_type">float</field>
              <field name="apply_sign" eval="False"/>
              <field name="size">14</field>
              <field name="decimal_size">2</field>
              <field name="alignment">right</field>
          </record>

          <!-- 164-177     Base imponible a coste. TODO de momento 0. -->
          <record id="aeat_mod340_invoice_received_export_line_20" model="aeat.model.export.config.line">
              <field name="sequence">20</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Base imponible a coste. TODO de momento 0.</field>
              <field name="expression">${object.invoice_record_id.base_cost}</field>
              <field name="export_type">float</field>
              <field name="apply_sign" eval="False"/>
              <field name="size">14</field>
              <field name="decimal_size">2</field>
              <field name="alignment">right</field>
          </record>

          <!-- 178-217     Identificación de la factura -->
          <record id="aeat_mod340_invoice_received_export_line_21" model="aeat.model.export.config.line">
              <field name="sequence">21</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Identificación de la factura</field>
              <field name="expression">${object.invoice_record_id.invoice_reference}</field>
              <field name="export_type">string</field>
              <field name="size">40</field>
              <field name="alignment">left</field>
          </record>

          <!-- 218-235     Número de registro -->
          <record id="aeat_mod340_invoice_received_export_line_22" model="aeat.model.export.config.line">
              <field name="sequence">22</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name"> Número de registro</field>
              <field name="expression">${object.invoice_record_id.register_sequence}</field>
              <field name="export_type">string</field>
              <field name="size">18</field>
              <field name="alignment">left</field>
          </record>

          <!-- 236-253     Número de facturas. Siempre 1. -->
          <record id="aeat_mod340_invoice_received_export_line_23" model="aeat.model.export.config.line">
              <field name="sequence">23</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Número de facturas</field>
              <field name="expression">${object.invoice_record_id.invoice_qty}</field>
              <field name="export_type">string</field>
              <field name="size">18</field>
              <field name="alignment">left</field>
          </record>

          <!-- 254-255     Número de registros (Desglose). -->
          <record id="aeat_mod340_invoice_received_export_line_24" model="aeat.model.export.config.line">
              <field name="sequence">24</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Número de registros (Desglose)</field>
              <field name="expression">${len(object.invoice_record_id.tax_line_ids)}</field>
              <field name="export_type">string</field>
              <field name="size">2</field>
              <field name="alignment">left</field>
          </record>

          <!-- 256-335     Intervalo de acumulación.-->
          <record id="aeat_mod340_invoice_received_export_line_25" model="aeat.model.export.config.line">
              <field name="sequence">25</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Intervalo de acumulación</field>
              <field name="expression"></field>
              <field name="export_type">string</field>
              <field name="size">80</field>
              <field name="alignment">left</field>
          </record>

          <!-- 336-349     Cuota deducible -->
          <record id="aeat_mod340_invoice_received_export_line_26" model="aeat.model.export.config.line">
              <field name="sequence">26</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Cuota deducible.</field>
              <field name="expression">${object.invoice_record_id.deductible_fee}</field>
              <field name="export_type">float</field>
              <field name="apply_sign" eval="False"/>
              <field name="size">14</field>
              <field name="decimal_size">2</field>
              <field name="alignment">right</field>
          </record>

          <!-- 350-357     Fecha de Pago -->
          <record id="aeat_mod340_invoice_received_export_line_27" model="aeat.model.export.config.line">
              <field name="sequence">27</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Fecha de Pago</field>
              <field name="expression">${object.invoice_record_id.pay_date}</field>
              <field name="export_type">string</field>
              <field name="size">8</field>
              <field name="alignment">left</field>
          </record>

          <!-- 358-370     Importes pagados -->
          <record id="aeat_mod340_invoice_received_export_line_28" model="aeat.model.export.config.line">
              <field name="sequence">28</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Importes pagados.</field>
              <field name="expression">${object.invoice_record_id.paid_amount}</field>
              <field name="export_type">float</field>
              <field name="apply_sign" eval="False"/>
              <field name="size">13</field>
              <field name="decimal_size">2</field>
              <field name="alignment">right</field>
          </record>

          <!-- 371          Medio de pago utilizado -->
          <record id="aeat_mod340_invoice_received_export_line_29" model="aeat.model.export.config.line">
              <field name="sequence">29</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Medio de pago utilizado</field>
              <field name="fixed_value"> </field>
              <field name="export_type">string</field>
              <field name="size">1</field>
              <field name="alignment">left</field>
          </record>

          <!-- 372-405     Cuenta Bancaria o medio de cobro utilizado -->
          <record id="aeat_mod340_invoice_received_export_line_30" model="aeat.model.export.config.line">
              <field name="sequence">30</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Cuenta Bancaria o medio de cobro utilizado</field>
              <field name="fixed_value"></field>
              <field name="export_type">string</field>
              <field name="size">34</field>
              <field name="alignment">left</field>
          </record>

          <!-- 406-500     Blancos -->
          <record id="aeat_mod340_invoice_received_export_line_31" model="aeat.model.export.config.line">
              <field name="sequence">31</field>
              <field name="export_config_id" ref="aeat_mod340_invoice_received_export_config"/>
              <field name="name">Blancos</field>
              <field name="fixed_value"></field>
              <field name="export_type">string</field>
              <field name="size">95</field>
              <field name="alignment">left</field>
          </record>
</odoo>
