================
Delivery GLS-ASM
================

.. !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fl10n--spain-lightgray.png?logo=github
    :target: https://github.com/OCA/l10n-spain/tree/12.0/delivery_gls_asm
    :alt: OCA/l10n-spain
.. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
    :target: https://translation.odoo-community.org/projects/l10n-spain-12-0/l10n-spain-12-0-delivery_gls_asm
    :alt: Translate me on Weblate
.. |badge5| image:: https://img.shields.io/badge/runbot-Try%20me-875A7B.png
    :target: https://runbot.odoo-community.org/runbot/189/12.0
    :alt: Try me on Runbot

|badge1| |badge2| |badge3| |badge4| |badge5| 

Este módulo integra la API de GLS España (antigua API de ASM) con Odoo. No es
válido para integraciones de GLS en otros países, que podrían usar otras APIs.

**Table of contents**

.. contents::
   :local:

Installation
============

Este módulo necesita la librería python `suds` y depende igualmente de los
módulos de OCA/delivery-carrier `delivery_package_number` y `delivery_state`.

La API de GLS/ASM no provee métodos de cálculo de precio, de modo que para poder
calcular los costes de envío sería recomendable instalar el módulo
`delivery_price_method`.

Configuration
=============

Para configurar el transportista:

#. Vaya a *Inventario > Configuración > Entrega > Método de envío* y cree uno
   nuevo.
#. Escoja *GLS ASM* Como proveedor.
#. Configure los datos de servicio que tiene contratados y el producto de
   envío que desea utilizar.

Si no tiene credenciales todavía, puede poner datos inventados y dejar el
método de envío en "Entorno de prueba". Se utilizará el usuario de pruebas de
la API GLS ASM.

Si GLS cambiase en un futuro el usuario de prueba, puede cambiarlo en los
*Parámetros del sistema* en la clave `delivery_gls_asm.api_user_demo`.

Usage
=====

Estas son las distintas operaciones posibles con este módulo:

Grabar servicios
~~~~~~~~~~~~~~~~

  #. Al confirmar el albarán, el servicio se grabará en GLS.
  #. Con la respuesta, se registrará en el chatter la referencia de envío y
     las etiquetas correspondientes.
  #. Para gestionar los bultos del envío, se puede utilizar el campo de número
     de bultos que añade `delivery_package_number` (ver el README para mayor
     información) o bien el flujo nativo de Odoo con paquetes de envío. El
     módulo mandará a la API de GLS/ASM el número correspondiente y podremos
     descargar las etiquetas en PDF con su correspondiente numeración.

Cancelar servicios
~~~~~~~~~~~~~~~~~~

  #. Al igual que en otros métodos de envío, en los albaranes de salida podemos
     cancelar un servicio determinado mediante la acción correspondiente en la
     pestaña de *Información Adicional*, sección *Información de entrega* una
     vez el pedido esté confirmado y la expedición generada.
  #. Podremos generar una nueva expedición una vez cancelado si fuese necesario.

Obtener etiquetas
~~~~~~~~~~~~~~~~~~

  #. Si por error hubiésemos eliminado el adjunto de las etiquetas que obtuvimos
     en la grabación del servicio, podemos obtenerlas de nuevo pulsando en el
     botón "Etiqueta GLS" que tenemos en la parte superior de la vista
     formulario del albarán.

Seguimiento de envíos
~~~~~~~~~~~~~~~~~~~~~

  #. El módulo está integrado con `delivery_state` para poder recabar la
     información de seguimiento de nuestros envíos directamente desde la API de
     GLS-ASM.
  #. Para ello, vaya al albarán con un envío GLS ya grabado y en la pestaña de
     *Información adicional* verá el botón *Actualizar seguimiento* para pedir
     a la API de GLS que actualice el estado de este envío en Odoo.

Manifiesto de envíos
~~~~~~~~~~~~~~~~~~~~

  #. Para obtener el manifiesto de expediciones que firmaría el repartidor,
     puede ir al menú *Inventario > Informes > Manifiesto de Envíos GLS*.
  #. También puede obtener el manifiesto desde un smart button en el formulario
     del transportista.
  #. En el asistente, seleccione el servicio GLS del cual quiere sacar el
     manifiesto y la fecha desde la que desea listar los envíos.
  #. Pulse en el botón "Manifiesto GlS" para obtener un listado en PDF de los
     envíos del servicio seleccionado.

Depuración de errores
~~~~~~~~~~~~~~~~~~~~~

  #. En cada servicio GLS-ASM dispone de una pestaña llamada "Técnico" en la
     que puede consultar la última petición y respuesta a la API de GLS-ASM.
     Esto le servirá como ayuda a la hora de depurar posibles errores de
     comunicación.
  #. También puede activar Odoo con `--log-level=debug` para refistrar las
     peticiones y las respuestas en el log.

Known issues / Roadmap
======================

* La API no facilita métodos para cotizar el coste real de los envíos, por lo
  que siempre se cotizan a 0. Si la cotización de envíos es necesaria,
  puede instalarse el módulo OCA `delivery_price_method` o bien personalizar
  el método de cotización para este tipo de transportista.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/OCA/l10n-spain/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us smashing it by providing a detailed and welcomed
`feedback <https://github.com/OCA/l10n-spain/issues/new?body=module:%20delivery_gls_asm%0Aversion:%2012.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
~~~~~~~

* Tecnativa

Contributors
~~~~~~~~~~~~

* `Tecnativa <https://www.tecnativa.com>`_:

  * David Vidal

Maintainers
~~~~~~~~~~~

This module is maintained by the OCA.

.. image:: https://odoo-community.org/logo.png
   :alt: Odoo Community Association
   :target: https://odoo-community.org

OCA, or the Odoo Community Association, is a nonprofit organization whose
mission is to support the collaborative development of Odoo features and
promote its widespread use.

This module is part of the `OCA/l10n-spain <https://github.com/OCA/l10n-spain/tree/12.0/delivery_gls_asm>`_ project on GitHub.

You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
